<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JugGames Demo - Coin Collector</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      display: flex; 
      justify-content: center; 
      align-items: center; 
      min-height: 100vh;
      font-family: 'Segoe UI', system-ui, sans-serif;
      overflow: hidden;
    }
    #gameContainer {
      position: relative;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
    }
    canvas { 
      display: block;
      background: linear-gradient(180deg, #0f0f23 0%, #1a1a3e 100%);
    }
    #ui {
      position: absolute;
      top: 10px;
      left: 10px;
      right: 10px;
      display: flex;
      justify-content: space-between;
      color: white;
      font-size: 16px;
      font-weight: 600;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
      z-index: 10;
    }
    #startScreen, #winScreen, #gameOverScreen {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: rgba(0,0,0,0.85);
      color: white;
      z-index: 20;
      text-align: center;
      padding: 20px;
    }
    #startScreen h1, #winScreen h1, #gameOverScreen h1 {
      font-size: 28px;
      margin-bottom: 10px;
    }
    #startScreen p, #winScreen p, #gameOverScreen p {
      font-size: 14px;
      opacity: 0.8;
      margin-bottom: 20px;
      max-width: 280px;
    }
    .btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 12px 32px;
      font-size: 16px;
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
    }
    .controls {
      font-size: 12px;
      opacity: 0.7;
      margin-top: 15px;
    }
    .hidden { display: none !important; }
    #winScreen { background: rgba(16, 185, 129, 0.9); }
    #gameOverScreen { background: rgba(239, 68, 68, 0.9); }
  </style>
</head>
<body>
  <div id="gameContainer">
    <canvas id="game" width="400" height="300"></canvas>
    <div id="ui">
      <span>ü™ô <span id="coins">0</span>/5</span>
      <span>‚ù§Ô∏è <span id="lives">3</span></span>
    </div>
    
    <div id="startScreen">
      <h1>üéÆ Coin Collector</h1>
      <p>Help our hero collect all 5 coins while avoiding the enemies!</p>
      <button class="btn" onclick="startGame()">Play Now</button>
      <div class="controls">
        ‚¨ÖÔ∏è‚û°Ô∏è Move &nbsp;|&nbsp; ‚¨ÜÔ∏è or SPACE Jump
      </div>
    </div>
    
    <div id="winScreen" class="hidden">
      <h1>üéâ You Win!</h1>
      <p>Amazing! You collected all the coins!</p>
      <button class="btn" onclick="startGame()">Play Again</button>
    </div>
    
    <div id="gameOverScreen" class="hidden">
      <h1>üíÄ Game Over</h1>
      <p>The enemies got you! Try again?</p>
      <button class="btn" onclick="startGame()">Try Again</button>
    </div>
  </div>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const W = canvas.width, H = canvas.height;

let gameRunning = false;
let player, coins, enemies, platforms, particles;
let coinsCollected = 0, lives = 3;
const keys = {};

const GRAVITY = 0.5;
const JUMP_FORCE = -12;
const MOVE_SPEED = 5;

class Player {
  constructor() {
    this.reset();
  }
  reset() {
    this.x = 50; this.y = H - 80;
    this.w = 24; this.h = 32;
    this.vx = 0; this.vy = 0;
    this.onGround = false;
    this.color = '#4ade80';
  }
  update() {
    // Movement
    if (keys['ArrowLeft'] || keys['KeyA']) this.vx = -MOVE_SPEED;
    else if (keys['ArrowRight'] || keys['KeyD']) this.vx = MOVE_SPEED;
    else this.vx *= 0.8;
    
    // Jump
    if ((keys['ArrowUp'] || keys['Space'] || keys['KeyW']) && this.onGround) {
      this.vy = JUMP_FORCE;
      this.onGround = false;
    }
    
    // Physics
    this.vy += GRAVITY;
    this.x += this.vx;
    this.y += this.vy;
    
    // Screen bounds
    if (this.x < 0) this.x = 0;
    if (this.x + this.w > W) this.x = W - this.w;
    
    // Platform collision
    this.onGround = false;
    for (const p of platforms) {
      if (this.vy > 0 && 
          this.x + this.w > p.x && this.x < p.x + p.w &&
          this.y + this.h >= p.y && this.y + this.h <= p.y + 15) {
        this.y = p.y - this.h;
        this.vy = 0;
        this.onGround = true;
      }
    }
    
    // Fall death
    if (this.y > H + 50) {
      loseLife();
    }
  }
  draw() {
    // Body
    ctx.fillStyle = this.color;
    ctx.fillRect(this.x, this.y, this.w, this.h);
    // Eyes
    ctx.fillStyle = 'white';
    ctx.fillRect(this.x + 5, this.y + 8, 6, 6);
    ctx.fillRect(this.x + 13, this.y + 8, 6, 6);
    ctx.fillStyle = '#1a1a2e';
    ctx.fillRect(this.x + 7, this.y + 10, 3, 3);
    ctx.fillRect(this.x + 15, this.y + 10, 3, 3);
  }
}

class Coin {
  constructor(x, y) {
    this.x = x; this.y = y;
    this.r = 10;
    this.angle = Math.random() * Math.PI * 2;
    this.collected = false;
  }
  update() {
    this.angle += 0.1;
    this.floatY = Math.sin(this.angle) * 3;
  }
  draw() {
    if (this.collected) return;
    ctx.beginPath();
    ctx.arc(this.x, this.y + this.floatY, this.r, 0, Math.PI * 2);
    ctx.fillStyle = '#fbbf24';
    ctx.fill();
    ctx.strokeStyle = '#f59e0b';
    ctx.lineWidth = 2;
    ctx.stroke();
    // Shine
    ctx.beginPath();
    ctx.arc(this.x - 3, this.y + this.floatY - 3, 3, 0, Math.PI * 2);
    ctx.fillStyle = 'rgba(255,255,255,0.6)';
    ctx.fill();
  }
}

class Enemy {
  constructor(x, y, range) {
    this.x = x; this.y = y;
    this.w = 28; this.h = 28;
    this.startX = x;
    this.range = range;
    this.speed = 1.5;
    this.dir = 1;
  }
  update() {
    this.x += this.speed * this.dir;
    if (this.x > this.startX + this.range || this.x < this.startX - this.range) {
      this.dir *= -1;
    }
  }
  draw() {
    // Body
    ctx.fillStyle = '#ef4444';
    ctx.fillRect(this.x, this.y, this.w, this.h);
    // Angry eyes
    ctx.fillStyle = 'white';
    ctx.fillRect(this.x + 4, this.y + 8, 8, 8);
    ctx.fillRect(this.x + 16, this.y + 8, 8, 8);
    ctx.fillStyle = '#1a1a2e';
    ctx.fillRect(this.x + 6, this.y + 10, 4, 4);
    ctx.fillRect(this.x + 18, this.y + 10, 4, 4);
    // Eyebrows
    ctx.strokeStyle = '#1a1a2e';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(this.x + 3, this.y + 6);
    ctx.lineTo(this.x + 12, this.y + 9);
    ctx.moveTo(this.x + 25, this.y + 6);
    ctx.lineTo(this.x + 16, this.y + 9);
    ctx.stroke();
  }
}

class Particle {
  constructor(x, y, color) {
    this.x = x; this.y = y;
    this.vx = (Math.random() - 0.5) * 8;
    this.vy = (Math.random() - 0.5) * 8 - 3;
    this.life = 1;
    this.color = color;
    this.size = Math.random() * 4 + 2;
  }
  update() {
    this.x += this.vx;
    this.y += this.vy;
    this.vy += 0.2;
    this.life -= 0.03;
  }
  draw() {
    ctx.globalAlpha = this.life;
    ctx.fillStyle = this.color;
    ctx.fillRect(this.x, this.y, this.size, this.size);
    ctx.globalAlpha = 1;
  }
}

function initGame() {
  player = new Player();
  coinsCollected = 0;
  lives = 3;
  particles = [];
  
  // Platforms
  platforms = [
    { x: 0, y: H - 20, w: W, h: 20 }, // Ground
    { x: 60, y: H - 80, w: 80, h: 15 },
    { x: 180, y: H - 130, w: 80, h: 15 },
    { x: 290, y: H - 80, w: 80, h: 15 },
    { x: 120, y: H - 200, w: 100, h: 15 },
  ];
  
  // Coins on platforms
  coins = [
    new Coin(100, H - 100),
    new Coin(220, H - 150),
    new Coin(330, H - 100),
    new Coin(170, H - 220),
    new Coin(200, H - 50),
  ];
  
  // Enemies
  enemies = [
    new Enemy(160, H - 48, 60),
    new Enemy(280, H - 48, 40),
  ];
  
  updateUI();
}

function updateUI() {
  document.getElementById('coins').textContent = coinsCollected;
  document.getElementById('lives').textContent = lives;
}

function spawnParticles(x, y, color, count = 8) {
  for (let i = 0; i < count; i++) {
    particles.push(new Particle(x, y, color));
  }
}

function checkCollisions() {
  // Coin collection
  for (const coin of coins) {
    if (coin.collected) continue;
    const dx = player.x + player.w/2 - coin.x;
    const dy = player.y + player.h/2 - coin.y;
    if (Math.sqrt(dx*dx + dy*dy) < coin.r + 15) {
      coin.collected = true;
      coinsCollected++;
      spawnParticles(coin.x, coin.y, '#fbbf24', 12);
      updateUI();
      if (coinsCollected >= 5) {
        winGame();
      }
    }
  }
  
  // Enemy collision
  for (const e of enemies) {
    if (player.x + player.w > e.x && player.x < e.x + e.w &&
        player.y + player.h > e.y && player.y < e.y + e.h) {
      loseLife();
    }
  }
}

function loseLife() {
  lives--;
  spawnParticles(player.x + player.w/2, player.y + player.h/2, '#ef4444', 15);
  updateUI();
  if (lives <= 0) {
    gameOver();
  } else {
    player.reset();
  }
}

function winGame() {
  gameRunning = false;
  document.getElementById('winScreen').classList.remove('hidden');
}

function gameOver() {
  gameRunning = false;
  document.getElementById('gameOverScreen').classList.remove('hidden');
}

function startGame() {
  document.getElementById('startScreen').classList.add('hidden');
  document.getElementById('winScreen').classList.add('hidden');
  document.getElementById('gameOverScreen').classList.add('hidden');
  initGame();
  gameRunning = true;
}

function gameLoop() {
  // Clear
  ctx.fillStyle = '#0f0f23';
  ctx.fillRect(0, 0, W, H);
  
  // Stars background
  ctx.fillStyle = 'rgba(255,255,255,0.3)';
  for (let i = 0; i < 30; i++) {
    ctx.fillRect((i * 37) % W, (i * 23) % H, 2, 2);
  }
  
  if (gameRunning) {
    player.update();
    coins.forEach(c => c.update());
    enemies.forEach(e => e.update());
    particles.forEach(p => p.update());
    particles = particles.filter(p => p.life > 0);
    checkCollisions();
  }
  
  // Draw platforms
  for (const p of platforms) {
    ctx.fillStyle = '#4c1d95';
    ctx.fillRect(p.x, p.y, p.w, p.h);
    ctx.fillStyle = '#7c3aed';
    ctx.fillRect(p.x, p.y, p.w, 4);
  }
  
  if (gameRunning || document.getElementById('startScreen').classList.contains('hidden')) {
    coins.forEach(c => c.draw());
    enemies.forEach(e => e.draw());
    player.draw();
    particles.forEach(p => p.draw());
  }
  
  requestAnimationFrame(gameLoop);
}

// Input handling
document.addEventListener('keydown', e => {
  keys[e.code] = true;
  if (['ArrowUp', 'ArrowDown', 'Space'].includes(e.code)) e.preventDefault();
});
document.addEventListener('keyup', e => keys[e.code] = false);

// Touch controls for mobile
let touchStartX = 0;
canvas.addEventListener('touchstart', e => {
  touchStartX = e.touches[0].clientX;
  if (gameRunning && player.onGround) {
    player.vy = JUMP_FORCE;
    player.onGround = false;
  }
});
canvas.addEventListener('touchmove', e => {
  const touchX = e.touches[0].clientX;
  const diff = touchX - touchStartX;
  if (Math.abs(diff) > 20) {
    keys['ArrowLeft'] = diff < 0;
    keys['ArrowRight'] = diff > 0;
  }
});
canvas.addEventListener('touchend', () => {
  keys['ArrowLeft'] = false;
  keys['ArrowRight'] = false;
});

// Initialize
initGame();
gameLoop();
</script>
</body>
</html>
